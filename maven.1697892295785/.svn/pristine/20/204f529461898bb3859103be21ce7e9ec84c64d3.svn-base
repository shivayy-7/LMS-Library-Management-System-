
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="sec"
	uri="http://www.springframework.org/security/tags"%>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />
<c:set var="userDetails" value="${serviceOutcome.data}" />
<script type="text/javascript"
	src="${contextPath}/assets/appJs/validation/common-utils.js"></script>
<div class="content">
	<div class="panel-header bg-primary-gradient">
		<div class="page-inner py-4">
			<div
				class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
				<div>
					<h2 class="text-blue pb-2 fw-bold">Add Librarian</h2>
				</div>
				<div class="ml-md-auto py-2 py-md-0">
					<a href="${contextPath}"
						class="btn btn-sm btn-border btn-blue btn-round mr-2"><i
						class="fa fa-home"></i></a> <a href="#"
						class="btn btn-sm btn-border btn-blue btn-round mr-2">/ User
						Management</a> <a href="#"
						class="btn btn-sm btn-border btn-blue btn-round mr-2">/ Add
						User</a>
				</div>
			</div>
		</div>
	</div>
	<div class="page-inner mt-5 pb-0">
		<div class="row mt-2">
			<%@ include file="/WEB-INF/views/message.jsp"%>
			<div class="col-md-12">
				<div class="card full-height">
					<div class="card-header">
						<div class="panel-actions">
							<a href="#" class="fa fa-caret-down"></a>
						</div>
						<h4 class="card-title">Librarian Details</h4>
					</div>
					<div class="card-body">
						<div class="col-md-12">
								<form class="form-horizontal"
									action="${contextPath}/mst/saveLibrarianDetails" method="POST"
									id="librarianSubmitPage">
									<input type="hidden" name="${_csrf.parameterName}"
										value="${_csrf.token}" />
										<input type="hidden" name="librarianId"
											value="${editLibrarian.librarianId}" /> 
											<input type="hidden" id="viewStatus" value="${status}" >
									
									<div class="row">
																														
												<div class="col-md-3 " >
									<div class="form-group">
										<label class="col-md-12 required" for="mobile">Library</label>
										<div class="col-md-12">
											<select class="form-control" id="libId" name="libId" >  												
													<option value="0">Select</option>
														<c:forEach items="${libraryList}" var="libraryLst">
															<option value="${libraryLst.libId}"
																${libraryLst.libId eq editLibrarian.library.libId ? 'selected' : ''}>
																${libraryLst.libName}</option>
														</c:forEach>

													</select> 
										</div>
									</div>
								</div>
								<div class="col-md-3">
													<div class="form-group">
														<label class="col-md-12 required" for="complaintName">Librarian Name</label>
														<div class="col-md-12 ">
															<input type="text" id="librarianName" name="librarianName"  oninput="this.value = this.value.toUpperCase();" value="${editLibrarian.librarianName}" class="form-control AlphabetsOnly" maxlength="50"   >																
														</div>
													</div>
												</div>
												
											<div class="col-lg-3">
											<div class="form-group">
												<label class="col-sm-12 required">Gender</label>
												<div class="col-sm-12">
													<select class="form-control" id="genderId" 
														name="genderId">
														<option value="0">Select</option>
														<c:forEach items="${genderList}" var="genderLst">														
															<option value="${genderLst.genderId}"${genderLst.genderId eq editLibrarian.gender.genderId ? 'selected' :''}>${genderLst.genderNameEN}</option>																
																														
														</c:forEach>
													</select>
												</div>
											</div>
											</div>
											
										<div class="col-md-3">
													<div class="form-group">
														<label class="col-md-12 required" for="complaintName">Address</label>
														<div class="col-md-12 ">
															<input type="text" id="librarianAddress" name="librarianAddress" value="${editLibrarian.librarianAddress}"class="form-control" maxlength="50"   >																
														</div>
													</div>
												</div>
											
																	
											<div class="col-md-3">
												<div class="form-group">
													<label class="col-md-12 required" for="mobile">Mobile</label>
													<div class="col-md-12">
														<input type="text" name="mobile" id="mobile" value="${editLibrarian.mobile}"
															class="form-control form-control-sm NumbersOnly"
															maxlength="10" onchange="validateMobileNo(this);"
															required placeholder="Enter Phone Number">
													</div>
												</div>
											</div>
										
									
											<div class="col-md-3">
												<div class="form-group">
													<label class="col-md-12 required" for="Email">Email Id</label>														
													<div class="col-md-12">
														<input type="email" name="email" id="email" value="${editLibrarian.email}"
															class="form-control form-control-sm emailsOnly"
															 required maxlength="150" placeholder="Enter Email Id">
													</div>
												</div>
											</div>
											
										
									</div>
									<div class="col-md-12 mt-2 text-center">
										<input type="button" class="btn btn-success btn-sm"
											value="Submit" onclick="return validateForm()"> <a
											href="${contextPath}/" type="button"
											class="btn btn-warning btn-sm">Back</a>

									</div>
								</form>
							</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
function validateForm() {
	 var libName = $('#libId').val();
    var lName = $('#librarianName').val();
     var gender = $('#genderId').val();
     var address = $('#librarianAddress').val();
     var email = $('#email').val();
     var mobile = $('#mobile').val();
     if (libName == "0") {
    		alert("Please select library.");
         return false;
     }
    if (lName == "") {
   		alert("Please enter librarian name.");
        return false;
    }
    if (gender == "0") {
        alert("Please select gender.");
        return false;
    }
    if (address == "") {
   		alert("Please enter librarian address.");
        return false;
    }

		if (mobile == "")
		{
			alert("Please enter mobile number.");
			return false;
		}

		if (mobile.length != 10)
		{
			alert("Please provide valid mobile number.");
			return false;
		}
		
    if (email == "") {
        alert("Please enter email id.");
        return false;
    }

    var validRegex =/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;
    if (!email.match(validRegex)) {
        alert("Please enter a valid email id.");
        return false;
    }
    var proceed = confirm("Do you want to Submit/Back!");

    if (proceed) {
        $('#librarianSubmitPage').submit();
    
    }
//     return true;
    

}


$(document).ready(function() {
	
	var status = $("#viewStatus").val();
   	if(status === 'VIEW'){
   		document.getElementById('libId').disabled = true;
   		document.getElementById('librarianName').readOnly = true;
   		document.getElementById('email').readOnly = true;
   		document.getElementById('genderId').disabled = true;
   		document.getElementById('mobile').readOnly = true;
   		document.getElementById('librarianAddress').readOnly = true;
   		
   	}	   	
});
		
</script>


